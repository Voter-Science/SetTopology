!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){t.exports=React},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5),o=function(){function t(){}return t.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},t.NewHttpClient=function(e){if(t.startsWith(e,"https://")){var n=e.substr(8);return new r.HttpClient("https",n)}if(t.startsWith(e,"http://")){n=e.substr(7);return new r.HttpClient("http",n)}throw"Invalid url protocol: "+e},t}(),i=function(){function t(t){var e=this;this.toString=function(){return e._url},this._url=t}return t.prototype.addQuery=function(t,e){if(null!=e&&null!=e){var n,r=this._url;n=-1==r.indexOf("?")?"?":"&",this._url=r+n+t+"="+encodeURIComponent(e.toString())}},t}();e.UrlBuilder=i;var s=function(){function t(){}return t.New=function(e,n,r){var i=o.NewHttpClient(e),s=new t;return s._authToken=n,s._httpClient=i,null==r&&(r=null),s._gpsProvider=r,s},t.prototype.getAsync=function(t){return this.sendAsync("GET",t)},t.prototype.deleteAsync=function(t){return this.sendAsync("DELETE",t)},t.prototype.putAsync=function(t,e){return this.sendAsync("PUT",t,e)},t.prototype.postAsync=function(t,e){return this.sendAsync("POST",t,e)},t.prototype.patchAsync=function(t,e){return this.sendAsync("POST",t,e)},t.prototype.sendAsync=function(t,e,n){var r=this;void 0===n&&(n=null);var o=e.toString();return new Promise(function(e,i){var s=null;null!=r._gpsProvider&&(s=r._gpsProvider.getLoc()),r._httpClient.sendAsync(t,o,n,"Bearer "+r._authToken,s,e,i)})},t}();e.XClient=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0),o=n(3),i=n(4),s=n(1),u=n(7);class a extends r.Component{constructor(t){super(t),window.mainMajor=this}render(){return this.state?this.state._info?r.createElement("div",null,"Major: ",this.state._info.Name):r.createElement("div",null,"Major! Not yet loaded: ",this.state.SheetId):r.createElement("div",null,"Loading...")}setSheetRef(t){var e=s.XClient.New(t.Server,t.AuthToken,void 0),n=new u.SheetClient(e,t.SheetId);this.setState({SheetId:t.SheetId,SheetClient:n},()=>{this.state.SheetClient.getInfoAsync().then(t=>{this.setState({_info:t})})})}}e.Major=a,o.render(r.createElement("div",null,r.createElement(a,null),r.createElement(i.Hello,{compiler:"TypeScript",framework:"React"})),document.getElementById("example"))},function(t,e){t.exports=ReactDOM},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);e.Hello=(t=>r.createElement("h1",null,"Hello from ",t.compiler," and ",t.framework,"!"))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),o=function(){function t(t,e){this._protocol=t,this._hostname=e}return t.prototype.sendAsync=function(t,e,n,o,i,s,u){var a,c=this;a=0==e.indexOf("http")?e:this._protocol+"://"+this._hostname+e,$.ajax({url:a,type:t,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("accept","application/json"),null!=o&&t.setRequestHeader("Authorization",o),null!=i&&(t.setRequestHeader("x-lat",i.Lat),t.setRequestHeader("x-long",i.Long))},data:null==n?void 0:JSON.stringify(n),success:function(t,e,n){if(202==n.status){var r=n.getResponseHeader("Location");if(r)return void setTimeout(function(){c.sendAsync("GET",r,null,o,i,s,u)},5e3)}s(t)},error:function(e,n,o){var i=e.responseJSON;if(i&&i.Message)u(i);else{var s=e.status,c="("+n+") Error "+s+" from "+t+" "+a;u(r.makeError(s,c))}}})},t}();e.HttpClient=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.MockGpsTracker=function(){this._geo={Lat:0,Long:0}},t.prototype.getLoc=function(){return this._geo},t.prototype.setLocation=function(t){this._geo=t},t}();e.MockGpsTracker=r,e.makeError=function(t,e){return{Code:t,Message:null==e?null:e,InternalDetails:null,CorrelationId:null}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(1),i=n(9),s=function(){function t(){}return t.ValidateColumnName=function(e){if(null==e)throw"Column Name is missing";if(!t._columnNameRegex.test(e))throw"Column Name is not valid: "+e},t.ValidateHelper=function(e,n,r){if(t.ValidateColumnName(e),null!=n&&n.length>400)throw"Description is too long for '"+e+"'";if(null!=r){if(r.length>15)throw"Too many possible values in question '"+e+"'";for(var o in r){var i=r[o];if(!i)throw"possible values can't be null in question '"+e+"'";if(i.length>50)throw"Possible value is too long for '"+e+"'"}}},t.ValidateColumnInfo=function(e){if(t.ValidateHelper(e.Name,e.Description,e.PossibleValues),e.Expression&&e.Semantic)throw"Can't send both Expression and Semantic properties on a column: '"+e.Name+"'.";if(e.Expression&&!e.IsReadOnly)throw"Expression columns must be read-only: '"+e.Name+"'."},t.ValidateAddColumn=function(e){t.ValidateHelper(e.ColumnName,e.Description,e.PossibleValues)},t._columnNameRegex=new RegExp("^[a-zA-Z0-9_]+$"),t}();e.Validators=s,e.PolygonKind="_polygon";var u=function(){function t(t,e){this._firstSegment=t,this._http=e}return t.prototype.ForEach=function(t){var e=this;return new Promise(function(n,r){var o=function(i){var s=i.Results;if(null!=s)for(var u in s){var a=s[u];try{t(a)}catch(t){r(t)}}null!=i.NextLink?e._http.getAsync(i.NextLink).then(function(t){o(t)}).catch(function(t){return r(t)}):n()};o(e._firstSegment)})},t}(),a=function(){function t(t,e){this._http=t,this._sheetId=e}return t.prototype.getId=function(){return this._sheetId},t.prototype.getSheetById=function(e){return new t(this._http,e)},t.prototype.getUrlBase=function(t){return void 0===t&&(t=""),new o.UrlBuilder("/sheets/"+this._sheetId+t)},t.prototype.getInfoAsync=function(){var t=this.getUrlBase("/info");return this._http.getAsync(t)},t.prototype.getSheetContentsAsync=function(t,e,n){var r=this.getUrlBase();return r.addQuery("filter",t),null!=e&&null!=e&&r.addQuery("select",e.join()),r.addQuery("version",n),this._http.getAsync(r)},t.prototype.getRecIdsAsync=function(){var t=[i.ColumnNames.RecId];return this.getSheetContentsAsync(null,t).then(function(t){return t[i.ColumnNames.RecId]})},t.prototype.postUpdateSingleRowAsync=function(t,e,n){var r=i.SheetContents.FromRow(t,e,n);return this.postUpdateAsync(r)},t.prototype.postUpdateSingleCellAsync=function(t,e,n){var r=i.SheetContents.FromSingleCell(t,e,n);return this.postUpdateAsync(r)},t.prototype.postUpdateAsync=function(t){var e=this.getUrlBase();return this._http.sendAsync("POST",e,t)},t.prototype.getDeltaRangeAsync=function(t,e){var n=this,r=this.getUrlBase("/deltas");return r.addQuery("start",t),r.addQuery("end",e),this._http.getAsync(r).then(function(t){return new u(t,n._http)})},t.prototype.getDeltaAsync=function(t){var e=this.getUrlBase("/history/"+t);return this._http.getAsync(e)},t.prototype.findVersionAsync=function(t){var e=this.getUrlBase("/history/find?timestamp="+t.toISOString());return this._http.getAsync(e).then(function(t){return t.VersionNumber})},t.prototype.getRebaseLogAsync=function(){var t=this,e=this.getUrlBase("/history/rebase");return this._http.getAsync(e).then(function(e){return new u(e,t._http)})},t.prototype.getChildrenAsync=function(){var t=this.getUrlBase("/child");return this._http.getAsync(t).then(function(t){return t.ChildrenIds})},t.prototype.createChildSheet=function(t){var e=this,n=this.getUrlBase("/child");return this._http.postAsync(n,t).then(function(t){return e.getSheetById(t.Id)})},t.prototype.createChildSheetFromFilterAsync=function(t,e,n){var r={Name:t,Filter:{WhereExpression:e},RecIds:null,ShareSandbox:n};return this.createChildSheet(r)},t.prototype.deleteChildSheetAsync=function(t){var e=this.getUrlBase("/child/"+t);return this._http.deleteAsync(e)},t.prototype.postCustomDataAsync=function(t,e,n){var r=this.getUrlBase("/data/"+t+"/"+e);return this._http.sendAsync("POST",r,n)},t.prototype.getCustomDataAsync=function(t,e){var n=this.getUrlBase("/data/"+t+"/"+e);return this._http.getAsync(n)},t.prototype.deleteCustomDataAsync=function(t,e){var n=this.getUrlBase("/data/"+t+"/"+e);return this._http.deleteAsync(n)},t.prototype.listCustomDataAsync=function(t){var e=this.getUrlBase("/data/"+t);return this._http.getAsync(e).then(function(t){return new r.ArrayEnumerable(t.Entries)})},t}();e.SheetClient=a;var c=function(){function t(t){this._client=t}return t.prototype.postNewExpressionAsync=function(t,e){try{s.ValidateColumnName(t);var n={Name:t,IsReadOnly:!0,Expression:e},r=this._client.getUrlBase("/columns/"+t);return this._client._http.postAsync(r,n)}catch(t){return Promise.reject(t)}},t.prototype.getOpStatusAsync=function(){var t=this._client.getUrlBase("/ops");return this._client._http.getAsync(t)},t.prototype.postOpAsync=function(t,e){var n={SheetId:this._client._sheetId,Kind:t,Cookie:null,Payload:e},r=this._client.getUrlBase("/ops");return this._client._http.putAsync(r,n)},t.prototype.postOpRefreshAsync=function(){return this.postOpAsync("RefreshContents",{})},t.prototype.postOpCreateOrUpdateColumnsAsync=function(t){var e={Infos:t};try{t.forEach(function(t){return s.ValidateColumnInfo(t)})}catch(t){return Promise.reject(t)}return this.postOpAsync("AddColumns",e)},t.prototype.postOpAddQuestionAsync=function(t){var e={Columns:t};try{for(var n in t){var r=t[n];s.ValidateAddColumn(r)}}catch(t){return Promise.reject(t)}return this.postOpAsync("AddColumns",e)},t.prototype.postOpDeleteQuestionAsync=function(t){var e={ColumnName:t};return this.postOpAsync("DeleteColumn",e)},t.prototype.WaitAsync=function(){var t=this;return new Promise(function(e,n){t.waitHelper(e,n)})},t.prototype.waitHelper=function(t,e){var n=this;this.getOpStatusAsync().then(function(r){null!=r.CurrentOp?setTimeout(function(){n.waitHelper(t,e)},5e3):t()}).catch(function(t){return e(t)})},t}();e.SheetAdminClient=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this._items=t}return t.prototype.ForEach=function(t){try{if(null!=this._items)for(var e in this._items){t(this._items[e])}return Promise.resolve()}catch(t){return Promise.reject(t)}},t}();e.ArrayEnumerable=r;var o=function(){function t(t){this._http=t}return t.prototype.getUserInfoAsync=function(t){return t?this._http.getAsync("/user/"+t):this._http.getAsync("/me")},t.prototype.getActivityFeedAsync=function(){return this._http.getAsync("/me/feed/rss")},t}();e.UserClient=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.RecId="RecId",t.FirstName="FirstName",t.LastName="LastName",t.Party="Party",t.Address="Address",t.City="City",t.Zip="Zip",t.Lat="Lat",t.Long="Long",t.XVoted="XVoted",t.XTargetPri="XTargetPri",t.PrecinctName="PrecinctName",t.Cellphone="Cellphone",t.HHID="HHID",t.XUser="XUser",t.XApp="XApp",t.XLat="XLat",t.XLong="XLong",t.XLastModified="XLastModified",t.XIPAddress="XIPAddress",t}();e.ColumnNames=r;var o=function(){function t(t){this._map={},this._source=t;for(var e=t.RecId,n=0;n<e.length;n++){var r=e[n];this._map[r]=n}}return t.prototype.lookupRecId=function(t){var e=this._map[t];return null==e?-1:e},t.prototype.set=function(t,e,n){var r=this.lookupRecId(t);-1!=r&&(this._source[e][r]=n)},t.prototype.getContents=function(){return this._source},t}();e.SheetContentsIndex=o;var i=function(){function t(){}return t.getSheetContentsIndex=function(t){return new o(t)},t.toCsv=function(t){var e=Object.keys(t),n=[],r=t[e[0]].length,o=0;for(n.push(e);o<r;){for(var i=[],s=0,u=e;s<u.length;s++){var a,c=t[u[s]][o];if(null==c||null==c)a="";else{a=c.toString();try{(a=a.replace('"',"'")).indexOf(",")>=0&&(a='"'+a+'"')}catch(t){a="???"}}i.push(a)}n.push(i),o++}var l="";return n.forEach(function(t,e){var r=t.join(",");l+=e<n.length?r+"\r\n":r}),l},t.ForEach=function(t,e){var n=t[r.RecId];for(var o in t){var i=t[o];if(i!=n)for(var s=0;s<i.length;s++){e(n[s],o,i[s])}}},t.FromSingleCell=function(t,e,n){var o={};return o[r.RecId]=[t],o[e]=[n],o},t.FromRow=function(t,e,n){if(e.length!=n.length)throw"length mismatch";var o={};o[r.RecId]=[t];for(var i=0;i<e.length;i++){var s=e[i],u=n[i];o[s]=[u]}return o},t.KeepRows=function(t,e){var n=[],r={},o=-1;for(var i in t)-1==o&&(o=t[i].length),n.push(i),r[i]=[];for(var s=0;s<o;s++){if(e(s))for(var u in n){var a=t[i=n[u]][s];r[i].push(a)}}return r},t.TakeN=function(t,e){var n={};for(var r in t){var o=t[r];n[r]=o.slice(0,e)}return n},t.AddTimestamp=function(e,n){void 0===n&&(n=null);var o=(new Date).toISOString(),i=[],s=[];if(i.push(r.XLastModified),s.push(o),n){var u=n.getLoc();i.push(r.XLat),i.push(r.XLong),s.push(u.Lat.toString()),s.push(u.Long.toString())}return t.Append(e,i,s)},t.Append=function(t,e,n){var r={},o=-1;for(var i in t)-1==o&&(o=t[i].length),r[i]=[];for(var s in e){r[i=e[s]]=[]}for(var u=0;u<o;u++){for(var i in t){var a=t[i][u];r[i].push(a)}for(var s in e){i=e[s],a=n[s];r[i].push(a)}}return r},t}();e.SheetContents=i}]);
//# sourceMappingURL=bundle.js.map